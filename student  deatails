import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns

# Load the dataset
data = pd.read_csv('student/student-mat.csv')

# load the data into dataframe
data = pd.read_csv('student/student-mat.csv', sep=';')
print("Data loaded successfully.")

# Data exploration
print(data.head())
print(data.info())
print("\nDataset information:")

# Data cleaning
print("\nMissing values:")
print(data.isnull().sum())

#Remove duplicates
data = data.drop_duplicates()
print("\nDuplicates removed.")
print(data.columns)


# Data analysis
avg_grades = data['G3'].mean()
print(f"\nAverage final grade (G3): {avg_grades}")

student_above_15 = len(data[data['G3'] > 15])
print(f"Number of students with final grade above 15: {student_above_15}")

correlation = data['studytime'].corr(data['G3'])
print(f"\nCorrelation between study time and final grade: {correlation:.2f}")

average_grade_by_age = data.groupby('age')['G3'].mean()
print("\nAverage final grade by age:")
print(average_grade_by_age)

# Data visualization
plt.figure(figsize=(8, 5))
plt.hist(data['G3'],bins=10,color='orange',edgecolor='black')
plt.title("Distribution of final Grades(G3)")
plt.xlabel("Final Grade")
plt.ylabel("Frequency")
plt.show()

plt.figure(figsize=(8, 5))
sns.scatterplot(data=data, x='studytime', y='G3', hue='age')
plt.title("Study Time vs Final Grade")
plt.xlabel("Study Time (hours)")
plt.ylabel("Final Grade")
plt.legend(title="Age")  # Rename the legend title
plt.show()

average_grade_by_age.plot(kind='bar', color=['purple','yellow'], figsize=(8, 5))
plt.title("Average Final Grade by Age")
plt.xlabel("Age")
plt.ylabel("Average Final Grade")
plt.show()
